
<script
  src="/assets/js/jquery.slim.min.js"
  defer
></script>
<script
  src="/assets/js/bootstrap.bundle.min.js"
  defer
></script>
<script>
  window.addEventListener('DOMContentLoaded', function() {
    var navbar = $('.navbar');
    var previousScroll = 0;
    var navBarOpen = true;
    var clickedMenuLink = false;

    function closeNavBar() {
      navbar.removeClass('scrolled-up');
      navbar.addClass('scrolled-down');
      navBarOpen = false;
    }

    function openNavBar() {
      navbar.removeClass('scrolled-down');
      navbar.addClass('scrolled-up');
      navBarOpen = true;
    }

    function scrollListener() {
      var newScroll = $(window).scrollTop();
      if (!clickedMenuLink || Math.abs(newScroll - previousScroll) < 400) {
        if (previousScroll < newScroll && newScroll > 200 && navBarOpen) {
          closeNavBar();
        } else if (previousScroll > newScroll && !navBarOpen) {
          openNavBar();
        }
      }
      previousScroll = newScroll;
    }

    $(window).on('scroll', scrollListener);

    var navMain = $('.navbar-collapse');
    navMain.on('click', 'a.handle-scroll', null, function () {
      if (window.location.pathname.endsWith('preguntas-frecuentes')) {
        return;
      }
      clickedMenuLink = true;
      navMain.collapse('hide');
      closeNavBar();
      $(window).off('scroll');
      setTimeout(function() {
        $(window).on('scroll', scrollListener);
      }, 200);
    });
  });
</script>
